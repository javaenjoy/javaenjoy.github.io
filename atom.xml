<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>僕の世界へようこそ</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://yoursite.com/"/>
  <updated>2017-10-18T08:41:59.036Z</updated>
  <id>http://yoursite.com/</id>
  
  <author>
    <name>黄乐</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>SSH整合(二)</title>
    <link href="http://yoursite.com/SSH%E6%95%B4%E5%90%88-%E4%BA%8C/"/>
    <id>http://yoursite.com/SSH整合-二/</id>
    <published>2017-10-18T07:58:52.000Z</published>
    <updated>2017-10-18T08:41:59.036Z</updated>
    
    <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a><center><embed src="//music.163.com/style/swf/widget.swf?sid=35345243&type=2&auto=0&width=320&height=66" width="340" height="86" allownetworking="all"></center></h2><h3 id="SSH整合笔记-二"><a href="#SSH整合笔记-二" class="headerlink" title="SSH整合笔记(二)"></a><center>SSH整合笔记(二)</center></h3><h5 id="emsp-emsp-emsp-说一下最近的进度吧-截止到目前-课程上传统的三大框架已经学完了-期间还学习了Maven的项目管理-关于Maven有个博主写的非常好-推荐给小伙伴们阅读学习-详见左侧推荐阅读链接-马上要进入的是Bos物流项目-这是一个基于ERP系统-由用友软件开发的一个宅急送后台系统-后面我会专门开一个专题-用来记录整个项目学习中的心得和体会-而且我目前正在利用课余学习SpringMVC和MyBatis-在这个项目中-我会尽量使用两种框架系统-SSH和SSM-来完成功能点-以此来体会其中的差异-好了-进入正题-这篇主要是描述一些实现功能点-主要是增删改查-时-代码中出现的bug-注解为主"><a href="#emsp-emsp-emsp-说一下最近的进度吧-截止到目前-课程上传统的三大框架已经学完了-期间还学习了Maven的项目管理-关于Maven有个博主写的非常好-推荐给小伙伴们阅读学习-详见左侧推荐阅读链接-马上要进入的是Bos物流项目-这是一个基于ERP系统-由用友软件开发的一个宅急送后台系统-后面我会专门开一个专题-用来记录整个项目学习中的心得和体会-而且我目前正在利用课余学习SpringMVC和MyBatis-在这个项目中-我会尽量使用两种框架系统-SSH和SSM-来完成功能点-以此来体会其中的差异-好了-进入正题-这篇主要是描述一些实现功能点-主要是增删改查-时-代码中出现的bug-注解为主" class="headerlink" title="&emsp;&emsp;&emsp;说一下最近的进度吧,截止到目前,课程上传统的三大框架已经学完了,期间还学习了Maven的项目管理,关于Maven有个博主写的非常好,推荐给小伙伴们阅读学习.(详见左侧推荐阅读链接).马上要进入的是Bos物流项目,这是一个基于ERP系统,由用友软件开发的一个宅急送后台系统,后面我会专门开一个专题,用来记录整个项目学习中的心得和体会.而且我目前正在利用课余学习SpringMVC和MyBatis.在这个项目中,我会尽量使用两种框架系统(SSH和SSM)来完成功能点,以此来体会其中的差异.好了,进入正题,这篇主要是描述一些实现功能点(主要是增删改查)时,代码中出现的bug,注解为主."></a>&emsp;&emsp;&emsp;说一下最近的进度吧,截止到目前,课程上传统的三大框架已经学完了,期间还学习了Maven的项目管理,关于Maven有个博主写的非常好,推荐给小伙伴们阅读学习.(详见左侧推荐阅读链接).马上要进入的是Bos物流项目,这是一个基于ERP系统,由用友软件开发的一个宅急送后台系统,后面我会专门开一个专题,用来记录整个项目学习中的心得和体会.而且我目前正在利用课余学习SpringMVC和MyBatis.在这个项目中,我会尽量使用两种框架系统(SSH和SSM)来完成功能点,以此来体会其中的差异.好了,进入正题,这篇主要是描述一些实现功能点(主要是增删改查)时,代码中出现的bug,注解为主.<a id="more"></a></h5><h5 id="emsp-emsp-emsp-一-持久层"><a href="#emsp-emsp-emsp-一-持久层" class="headerlink" title="&emsp;&emsp;&emsp;一.持久层"></a>&emsp;&emsp;&emsp;一.持久层</h5><p>&emsp;&emsp;&emsp;持久层也就是dao层,这块的代码主要是负责帮我们与数据库进行交互的.dao层使用的是hibernate框架技术.因为这里是整合,所以hibernate的核心工厂类sessionfactory已经交给spring的ioc容器去创建,同时spring强大的声明式事物管理,也囊括了hibernate的事物管理(主要体现在service层).这里有个有<strong>歧义</strong>的地方,那就是sessionfatory的创建方式和<strong>session</strong>的获取方式.我的代码如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Resource</span></div><div class="line"><span class="keyword">private</span> SessionFactory ssf;<span class="comment">//将session工厂从ioc容器取出,单例模式,保证唯一,使用时创建</span></div><div class="line">    ssf.getCurrentSession()<span class="comment">//从当前线程,拿到绑定的session,避免资源的浪费</span></div></pre></td></tr></table></figure></p><p>另外一种写法,代码如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Repository</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">OrderDAOImpl</span> <span class="keyword">extends</span> <span class="title">HibernateDaoSupport</span> <span class="keyword">implements</span> <span class="title">IOrderDAO</span> </span>&#123;</div><div class="line"></div><div class="line"><span class="meta">@Autowired</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSupperSessionFactory</span><span class="params">(SessionFactory sessionFactory)</span> </span>&#123;</div><div class="line"><span class="keyword">super</span>.setSessionFactory(sessionFactory);</div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>这两种写法其实都可以,但是我更喜欢第一种.因为我个人认为,第二种写法,可以明显看出是耦合了spring的 HibernateDaoSupport 这个类的,它相当于spring对hibernate又一层的封装.对于代码的高内聚,低耦合思想.我不太喜欢这么写.我的写法更倾向于使用原生的hibernate来进行数据库的交互.这样即使spring出错了,我的dao层代码是不用更改的.当然如果有更好的解释,欢迎一起交流.</p><h5 id="emsp-emsp-emsp-二-业务层"><a href="#emsp-emsp-emsp-二-业务层" class="headerlink" title="&emsp;&emsp;&emsp;二.业务层"></a>&emsp;&emsp;&emsp;二.业务层</h5><p>&emsp;&emsp;&emsp;业务层最容易出错的地方就是事物的问题,其中有一个问题还挺典型的.那就是使用注解配置事物的时候,有一个弊端.那就是无法指定方法,只能对当前类所有的方法添加事物操作,否则在做增删改数据的时候,事物永远无法提交.我曾经出错的代码如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Transactional</span>  <span class="comment">//注意这里的事物配置在更新的方法上了,导致整个类的其他方法提交时都没在事物的管理之内</span></div><div class="line"><span class="meta">@Override</span></div><div class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">update</span><span class="params">(Employee emp)</span> </span>&#123;</div><div class="line">employeeDao.update(emp);</div><div class="line"></div><div class="line">&#125;</div></pre></td></tr></table></figure></p><p>正确的应该如下:<br><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Service</span></div><div class="line"><span class="meta">@Transactional</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmployeeServiceImpl</span> <span class="keyword">implements</span> <span class="title">IEmployeeService</span> </span>&#123;</div></pre></td></tr></table></figure></p><p>tips:如果想要针对特定的方法,也可以做到,那就是使用xml的事物配置,详见SSH整合(一).</p><h5 id="emsp-emsp-emsp-三-表现层"><a href="#emsp-emsp-emsp-三-表现层" class="headerlink" title="&emsp;&emsp;&emsp;三.表现层"></a>&emsp;&emsp;&emsp;三.表现层</h5><p>&emsp;&emsp;&emsp;这里主要是struts2的注解配置和struts.xml配置问题.关于注解的列出几个比较容易出错的地方:</p><ul><li><p><strong>配置action的时候,几点解释</strong></p><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Action</span>(value = <span class="string">"empInfoList"</span>, className = <span class="string">"empAction"</span>, results = &#123;</div><div class="line"><span class="meta">@Result</span>(name = <span class="string">"getAllEmpInfo"</span>, location = <span class="string">"/empList.jsp"</span>) &#125;)</div></pre></td></tr></table></figure></li><li><p>这里的value值对应的就是action的访问名,还要说一点的就是这里前端发请求的时候,一定指定的action名字.action,因为配置了延迟加载,指定拦截以.action结尾的请求.</p></li><li>classname的值对应的就是action的全类名.这里不用写,因为已经交给spring的ioc容器去创建.所以直接写类名就可以了.</li><li>result的配置就是返回的结果视图,这里要注意的就是location和type属性.这两个是配套使用的,如果你的type指定为转发(默认不写),那么这个时候你要考虑一个问题,<strong>那就是表单重复提交的问题.</strong>说直白点,配置在转发里的参数,一次请求就会执行一次action,也就是说,这里你刷新网页,那么就会再次访问一次action.所以,这里我们不能用转发,要用重定向,代码如下:<figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Action</span>(value = <span class="string">"updateEmp"</span>, className = <span class="string">"empAction"</span>,results = &#123;</div><div class="line"><span class="meta">@Result</span>(name = <span class="string">"updateSuccess"</span>,type=<span class="string">"redirectAction"</span>, location = <span class="string">"empInfoList"</span>) &#125;)</div></pre></td></tr></table></figure></li></ul><p>重定向有两种,redirectAction和redirect,location分别对应的就是一个action和jsp页面.</p><ul><li><strong>全局配置</strong><figure class="highlight java"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="meta">@Controller</span></div><div class="line"><span class="meta">@Namespace</span>(<span class="string">"/"</span>)</div><div class="line"><span class="meta">@ParentPackage</span>(<span class="string">"ssh"</span>) <span class="comment">//包继承,如果使用到json数据自动封装,要继承"json-default"</span></div><div class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">EmpAction</span> <span class="keyword">extends</span> <span class="title">ActionSupport</span> <span class="keyword">implements</span> <span class="title">ModelDriven</span>&lt;<span class="title">EmpInfo</span>&gt; </span>&#123;</div></pre></td></tr></table></figure></li></ul><p>其他全局配置,像处理error和null以及拦截器其中的方法视图,配置如下:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div></pre></td><td class="code"><pre><div class="line"><span class="tag">&lt;<span class="name">package</span> <span class="attr">name</span>=<span class="string">"ssh"</span> <span class="attr">namespace</span>=<span class="string">"/"</span> <span class="attr">extends</span>=<span class="string">"struts-default"</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 配置登录拦截器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">interceptors</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">interceptor</span> <span class="attr">name</span>=<span class="string">"loginCheck"</span> <span class="attr">class</span>=<span class="string">"cn.hl.interceptor.LoginInterceptor"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">interceptor-stack</span> <span class="attr">name</span>=<span class="string">"loginStack"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"defaultStack"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">interceptor-ref</span> <span class="attr">name</span>=<span class="string">"loginCheck"</span>&gt;</span><span class="tag">&lt;/<span class="name">interceptor-ref</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">interceptor-stack</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">interceptors</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- 执行指定的拦截器 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">default-interceptor-ref</span> <span class="attr">name</span>=<span class="string">"loginStack"</span>&gt;</span><span class="tag">&lt;/<span class="name">default-interceptor-ref</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 全局视图 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">global-results</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"success"</span>&gt;</span>/index.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"login"</span> <span class="attr">type</span>=<span class="string">"redirect"</span>&gt;</span>/login.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 错误视图配置 --&gt;</span></div><div class="line"><span class="comment">&lt;!-- &lt;result name="null"&gt;/error/null.jsp&lt;/result&gt;</span></div><div class="line"><span class="comment"> --&gt;</span><span class="tag">&lt;<span class="name">result</span> <span class="attr">name</span>=<span class="string">"error"</span>&gt;</span>/error.jsp<span class="tag">&lt;/<span class="name">result</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">global-results</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 全局异常 --&gt;</span> </div><div class="line"><span class="tag">&lt;<span class="name">global-exception-mappings</span>&gt;</span></div><div class="line"><span class="comment">&lt;!-- result 会取找全局视图的名称 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">exception-mapping</span> <span class="attr">result</span>=<span class="string">"null"</span></span></div><div class="line"><span class="tag"><span class="attr">exception</span>=<span class="string">"java.lang.NullPointerException"</span>&gt;</span><span class="tag">&lt;/<span class="name">exception-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">exception-mapping</span> <span class="attr">result</span>=<span class="string">"error"</span> <span class="attr">exception</span>=<span class="string">"java.lang.Exception"</span>&gt;</span><span class="tag">&lt;/<span class="name">exception-mapping</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">global-exception-mappings</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">package</span>&gt;</span></div></pre></td></tr></table></figure></p><p>这里就是我遇到的所有bug了,其中有些还是很多缺陷.比如前端页面,我这里的前端页面,没有使用到jquery的技术,全部都是用struts2的s标签写的.还有就是代码冗余很多,没有做baseAction和baseService等的抽取.以及数据库语句优化等等,这些问题我已经注意到了,所以在接下来的bos项目中,我会多注意这些细节问题,让自己的代码更加完美.照例歌一首,歌名:<strong>干物女</strong>(依然来自<strong>封茗囧菌</strong>).</p><p></p><p align="right">2017-10-18 16:08:58 星期三</p><br><img src="/SSH整合-二/ssh.jpg" alt=""><p></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;&lt;center&gt;&lt;embed src=&quot;//music.163.com/style/swf/widget.swf?sid=35345243&amp;type=2&amp;auto=0&amp;width=320&amp;height=66&quot; width=&quot;340&quot; height=&quot;86&quot; allownetworking=&quot;all&quot;&gt;&lt;/center&gt;&lt;/h2&gt;&lt;h3 id=&quot;SSH整合笔记-二&quot;&gt;&lt;a href=&quot;#SSH整合笔记-二&quot; class=&quot;headerlink&quot; title=&quot;SSH整合笔记(二)&quot;&gt;&lt;/a&gt;&lt;center&gt;SSH整合笔记(二)&lt;/center&gt;&lt;/h3&gt;&lt;h5 id=&quot;emsp-emsp-emsp-说一下最近的进度吧-截止到目前-课程上传统的三大框架已经学完了-期间还学习了Maven的项目管理-关于Maven有个博主写的非常好-推荐给小伙伴们阅读学习-详见左侧推荐阅读链接-马上要进入的是Bos物流项目-这是一个基于ERP系统-由用友软件开发的一个宅急送后台系统-后面我会专门开一个专题-用来记录整个项目学习中的心得和体会-而且我目前正在利用课余学习SpringMVC和MyBatis-在这个项目中-我会尽量使用两种框架系统-SSH和SSM-来完成功能点-以此来体会其中的差异-好了-进入正题-这篇主要是描述一些实现功能点-主要是增删改查-时-代码中出现的bug-注解为主&quot;&gt;&lt;a href=&quot;#emsp-emsp-emsp-说一下最近的进度吧-截止到目前-课程上传统的三大框架已经学完了-期间还学习了Maven的项目管理-关于Maven有个博主写的非常好-推荐给小伙伴们阅读学习-详见左侧推荐阅读链接-马上要进入的是Bos物流项目-这是一个基于ERP系统-由用友软件开发的一个宅急送后台系统-后面我会专门开一个专题-用来记录整个项目学习中的心得和体会-而且我目前正在利用课余学习SpringMVC和MyBatis-在这个项目中-我会尽量使用两种框架系统-SSH和SSM-来完成功能点-以此来体会其中的差异-好了-进入正题-这篇主要是描述一些实现功能点-主要是增删改查-时-代码中出现的bug-注解为主&quot; class=&quot;headerlink&quot; title=&quot;&amp;emsp;&amp;emsp;&amp;emsp;说一下最近的进度吧,截止到目前,课程上传统的三大框架已经学完了,期间还学习了Maven的项目管理,关于Maven有个博主写的非常好,推荐给小伙伴们阅读学习.(详见左侧推荐阅读链接).马上要进入的是Bos物流项目,这是一个基于ERP系统,由用友软件开发的一个宅急送后台系统,后面我会专门开一个专题,用来记录整个项目学习中的心得和体会.而且我目前正在利用课余学习SpringMVC和MyBatis.在这个项目中,我会尽量使用两种框架系统(SSH和SSM)来完成功能点,以此来体会其中的差异.好了,进入正题,这篇主要是描述一些实现功能点(主要是增删改查)时,代码中出现的bug,注解为主.&quot;&gt;&lt;/a&gt;&amp;emsp;&amp;emsp;&amp;emsp;说一下最近的进度吧,截止到目前,课程上传统的三大框架已经学完了,期间还学习了Maven的项目管理,关于Maven有个博主写的非常好,推荐给小伙伴们阅读学习.(详见左侧推荐阅读链接).马上要进入的是Bos物流项目,这是一个基于ERP系统,由用友软件开发的一个宅急送后台系统,后面我会专门开一个专题,用来记录整个项目学习中的心得和体会.而且我目前正在利用课余学习SpringMVC和MyBatis.在这个项目中,我会尽量使用两种框架系统(SSH和SSM)来完成功能点,以此来体会其中的差异.好了,进入正题,这篇主要是描述一些实现功能点(主要是增删改查)时,代码中出现的bug,注解为主.&lt;/h5&gt;
    
    </summary>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="bug集" scheme="http://yoursite.com/tags/bug%E9%9B%86/"/>
    
      <category term="ssh框架整合" scheme="http://yoursite.com/tags/ssh%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/"/>
    
  </entry>
  
  <entry>
    <title>SSH整合(一)</title>
    <link href="http://yoursite.com/SSH%E6%95%B4%E5%90%88-%E4%B8%80/"/>
    <id>http://yoursite.com/SSH整合-一/</id>
    <published>2017-10-10T18:37:58.000Z</published>
    <updated>2017-10-11T14:19:43.034Z</updated>
    
    <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a><center><embed src="//music.163.com/style/swf/widget.swf?sid=409650851&type=2&auto=1&width=320&height=66" width="340" height="86" allownetworking="all"></center></h2><h3 id="SSH整合笔记-一"><a href="#SSH整合笔记-一" class="headerlink" title="SSH整合笔记(一)"></a><center>SSH整合笔记(一)</center></h3><h5 id="emsp-emsp-本来准备国庆写点东西的-但是几乎都是写写删删-憋了几天没写出个所以然来-后来索性就没写了-最近几天自己看视频算是提前研究完了SSH整合-而且也用整合后的框架模仿着写了2个案例-过程曲折-BUG满天飞-全是没遇到过的-有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉-而且都是细节配置问题…-但是自己解决了BUG之后的那种喜悦感-也还是蛮开心的-哈哈-所以这篇主要就是记录-我整合SSH的时候出现的各种大小BUG-给大家分享出来共同学习"><a href="#emsp-emsp-本来准备国庆写点东西的-但是几乎都是写写删删-憋了几天没写出个所以然来-后来索性就没写了-最近几天自己看视频算是提前研究完了SSH整合-而且也用整合后的框架模仿着写了2个案例-过程曲折-BUG满天飞-全是没遇到过的-有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉-而且都是细节配置问题…-但是自己解决了BUG之后的那种喜悦感-也还是蛮开心的-哈哈-所以这篇主要就是记录-我整合SSH的时候出现的各种大小BUG-给大家分享出来共同学习" class="headerlink" title="&emsp;&emsp;本来准备国庆写点东西的,但是几乎都是写写删删,憋了几天没写出个所以然来,后来索性就没写了.最近几天自己看视频算是提前研究完了SSH整合,而且也用整合后的框架模仿着写了2个案例,过程曲折,BUG满天飞.全是没遇到过的.有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉,而且都是细节配置问题….但是自己解决了BUG之后的那种喜悦感,也还是蛮开心的,哈哈!所以这篇主要就是记录,我整合SSH的时候出现的各种大小BUG,给大家分享出来共同学习."></a>&emsp;&emsp;本来准备国庆写点东西的,但是几乎都是写写删删,憋了几天没写出个所以然来,后来索性就没写了.最近几天自己看视频算是提前研究完了SSH整合,而且也用整合后的框架模仿着写了2个案例,过程曲折,BUG满天飞.全是没遇到过的.有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉,而且都是细节配置问题….但是自己解决了BUG之后的那种喜悦感,也还是蛮开心的,哈哈!所以这篇主要就是记录,我整合SSH的时候出现的各种大小BUG,给大家分享出来共同学习.</h5><hr><a id="more"></a><h5 id="emsp-emsp-这一篇的主要是分享一些环境准备的bug-相信小伙伴们都已经感同身受了-进入了框架阶段之后就是各种配配配-各种xml写来写去-错一丁点都不行-想起昨晚配c3p0把dataSource的S没大写就报错了-这报错不要紧-一检查就是半个小时起-后来发现是这个问题-整个人都不好了-所以小伙伴们写的时候一定要细心-实在不行ctrl-c-v大法-哈哈-好了废话不多说-直接进入咱们的主题"><a href="#emsp-emsp-这一篇的主要是分享一些环境准备的bug-相信小伙伴们都已经感同身受了-进入了框架阶段之后就是各种配配配-各种xml写来写去-错一丁点都不行-想起昨晚配c3p0把dataSource的S没大写就报错了-这报错不要紧-一检查就是半个小时起-后来发现是这个问题-整个人都不好了-所以小伙伴们写的时候一定要细心-实在不行ctrl-c-v大法-哈哈-好了废话不多说-直接进入咱们的主题" class="headerlink" title="&emsp;&emsp;这一篇的主要是分享一些环境准备的bug,相信小伙伴们都已经感同身受了.进入了框架阶段之后就是各种配配配,各种xml写来写去.错一丁点都不行.想起昨晚配c3p0把dataSource的S没大写就报错了.这报错不要紧,一检查就是半个小时起,后来发现是这个问题,整个人都不好了.所以小伙伴们写的时候一定要细心,实在不行ctrl+c,v大法.哈哈,好了废话不多说,直接进入咱们的主题!"></a>&emsp;&emsp;这一篇的主要是分享一些环境准备的bug,相信小伙伴们都已经感同身受了.进入了框架阶段之后就是各种配配配,各种xml写来写去.错一丁点都不行.想起昨晚配c3p0把dataSource的S没大写就报错了.这报错不要紧,一检查就是半个小时起,后来发现是这个问题,整个人都不好了.所以小伙伴们写的时候一定要细心,实在不行ctrl+c,v大法.哈哈,好了废话不多说,直接进入咱们的主题!<!--more--></h5><hr><p> &emsp;&emsp;首先是jar包,这个真的把我坑的要死,我们hibernate学习用的hibernate3.但是老师给的资源包却是hibernate5,导致我在整合hibernate的时候,配置web.xml文件中,hibernate用的3版本.但是这个加载不报错,就是session拿不到,后来找了半天才知道是hibernate5那里写成3了,类似的配置在bean.xml中,管理sessionfactory的时候也碰到了,希望小伙伴们在配置的时候一定注意版本的问题.我整合的是spring4+hibernate5+struts2.3.还有用userLiberay的时候,记得手动发布到tomcat上,不然部署的lib包里没有文件.还有个tomcat的小bug,我的spring和struts整合j的ar包,有一个web包死活自动发布不了,最后没法,只能自己手动拷了….</p><pre><code>&lt;!-- 配置spring的OpenSessionInView模式 【目的：JSp页面访问延迟加载的数据】 --&gt;&lt;filter&gt;    &lt;filter-name&gt;OpenSessionInView&lt;/filter-name&gt;    &lt;filter-class&gt;org.springframework.orm.hibernate5.support.OpenSessionInViewFilter&lt;/filter-class&gt;&lt;/filter&gt;&lt;filter-mapping&gt;    &lt;filter-name&gt;OpenSessionInView&lt;/filter-name&gt;    &lt;url-pattern&gt;*.action&lt;/url-pattern&gt;&lt;/filter-mapping&gt;</code></pre><p> &emsp;&emsp;配置注解扫描包的名字问题,第一天我整合spring和struts2的时候,做单元测试就是在容器里找不到相应的类,一遍遍检查,配置都对啊,注解配置也没问题啊,测试方法也Ok啊,来来回回检查了2个多小时,心态炸了.死活测试通不过,后来冷静了一会,静下来之后试着从底层思想去理解,ioc容器实现类创建的原理就是反射,如果找不到依赖注入的类,那只能说明这个类并没有注入容器.还有一种情况是这个类并没有和依赖注入类加入<strong>同一个</strong>ioc容器.想到这里,我豁然开朗,因为在整合的时候,<strong>我分别给不同的层(MVC),创建了相应的xml配置文件(据说实际开发确实是这样的)</strong>.扫描注解的包自然只是扫描了对应的包名,那用注解@resourse注入的类自然就注入不了.因为容器里压根就没这个类,解决办法有两种.第一种,不使用注解,生成get/set方法,当做成员变量注入.第二种就是扫描包名改为扫描整个项目的跟路径(<strong>src不行</strong>),最大只能写一级包名,例如 cn.hl.service 可以写成 cn.除此外就是创建一个bean.xml,将其他的bean-*.xml全部导入进来,然后只扫描一次bean.xml就可以.个人推荐最后一种,因为前一种扫描整个项目,项目一大就忒耗时间,所以实际开发不推荐.(有兴趣小伙伴可以试下)<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 开启注解扫描 --&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn"</span>&gt;</span><span class="tag">&lt;/<span class="name">context:component-scan</span>&gt;</span></div></pre></td></tr></table></figure></p><p> &emsp;&emsp;最后就是今天事物的配置,出了个问题.今天我主要就是做用整合的SSH写了个仿OA的案例,先写好了需求文档,然后写分析实现思路,按照上面的思路,一步步用代码实现.(强迫症请勿模仿)好不容易完成之后,出了个很奇怪的bug.那就是我保存员工,修改员工和删除员工的功能都实现不了.用debug跑了一圈,数据都有啊.怎么就是不给我发sql语句给数据库.非常郁闷,后来找航哥过来瞄了半天,两个人都一脸懵逼.最后航哥一句话说到点子上了,他说你的查询都能用对吧.那没跑了,就是事物的问题.我突然想到,对哦,之前没用spring声明式的时候,hibernate如果要进行增删改的话都得提交事物.spring事物管理强大的地方就在这,你如果不声明,是不会帮你执行数据库操作的.后来加了事物之后就一切正常了,代码如下:<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="comment">&lt;!-- 3) 事务配置 --&gt;</span></div><div class="line"></div><div class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"txManager"</span> <span class="attr">class</span>=<span class="string">"org.springframework.orm.hibernate5.HibernateTransactionManager"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"sessionFactory"</span> <span class="attr">ref</span>=<span class="string">"sessionFactory"</span>&gt;</span><span class="tag">&lt;/<span class="name">property</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 3.2 事务增强(如何管理事务)--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:advice</span> <span class="attr">id</span>=<span class="string">"txAdvice"</span> <span class="attr">transaction-manager</span>=<span class="string">"txManager"</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:attributes</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"get*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"find*"</span> <span class="attr">read-only</span>=<span class="string">"true"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">tx:method</span> <span class="attr">name</span>=<span class="string">"*"</span> <span class="attr">read-only</span>=<span class="string">"false"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tx:attributes</span>&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">tx:advice</span>&gt;</span></div><div class="line"></div><div class="line"><span class="comment">&lt;!-- 3.3 Aop配置 = 切入点表达式(拦截目标对象，生成代理)  + 事务增强应用--&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">aop:config</span>&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">aop:pointcut</span> <span class="attr">expression</span>=<span class="string">"execution(* cn.hl.service.impl.*.*(..))"</span> <span class="attr">id</span>=<span class="string">"pt"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;<span class="name">aop:advisor</span> <span class="attr">advice-ref</span>=<span class="string">"txAdvice"</span> <span class="attr">pointcut-ref</span>=<span class="string">"pt"</span>/&gt;</span></div><div class="line"><span class="tag">&lt;/<span class="name">aop:config</span>&gt;</span></div></pre></td></tr></table></figure></p><hr><p>&emsp;&emsp;好了,今天就分享到这里,后面有bug我会继续在这里更新的,打卡,睡觉!!老规矩最后推荐首歌,手机端的小伙伴们因为看不到这个网易云插件,所以各位直接手动吧,歌名:<strong>霜雪千年</strong>(<strong>双笙/封茗囧菌</strong>版本的).唱得真心不错,重点是声音好听,哈哈!</p><p></p><p align="right">2017-10-11 02:07:29 星期三</p><br><img src="/SSH整合-一/ssh.jpg" alt=""><p></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;&lt;center&gt;&lt;embed src=&quot;//music.163.com/style/swf/widget.swf?sid=409650851&amp;type=2&amp;auto=1&amp;width=320&amp;height=66&quot; width=&quot;340&quot; height=&quot;86&quot; allownetworking=&quot;all&quot;&gt;&lt;/center&gt;&lt;/h2&gt;&lt;h3 id=&quot;SSH整合笔记-一&quot;&gt;&lt;a href=&quot;#SSH整合笔记-一&quot; class=&quot;headerlink&quot; title=&quot;SSH整合笔记(一)&quot;&gt;&lt;/a&gt;&lt;center&gt;SSH整合笔记(一)&lt;/center&gt;&lt;/h3&gt;&lt;h5 id=&quot;emsp-emsp-本来准备国庆写点东西的-但是几乎都是写写删删-憋了几天没写出个所以然来-后来索性就没写了-最近几天自己看视频算是提前研究完了SSH整合-而且也用整合后的框架模仿着写了2个案例-过程曲折-BUG满天飞-全是没遇到过的-有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉-而且都是细节配置问题…-但是自己解决了BUG之后的那种喜悦感-也还是蛮开心的-哈哈-所以这篇主要就是记录-我整合SSH的时候出现的各种大小BUG-给大家分享出来共同学习&quot;&gt;&lt;a href=&quot;#emsp-emsp-本来准备国庆写点东西的-但是几乎都是写写删删-憋了几天没写出个所以然来-后来索性就没写了-最近几天自己看视频算是提前研究完了SSH整合-而且也用整合后的框架模仿着写了2个案例-过程曲折-BUG满天飞-全是没遇到过的-有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉-而且都是细节配置问题…-但是自己解决了BUG之后的那种喜悦感-也还是蛮开心的-哈哈-所以这篇主要就是记录-我整合SSH的时候出现的各种大小BUG-给大家分享出来共同学习&quot; class=&quot;headerlink&quot; title=&quot;&amp;emsp;&amp;emsp;本来准备国庆写点东西的,但是几乎都是写写删删,憋了几天没写出个所以然来,后来索性就没写了.最近几天自己看视频算是提前研究完了SSH整合,而且也用整合后的框架模仿着写了2个案例,过程曲折,BUG满天飞.全是没遇到过的.有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉,而且都是细节配置问题….但是自己解决了BUG之后的那种喜悦感,也还是蛮开心的,哈哈!所以这篇主要就是记录,我整合SSH的时候出现的各种大小BUG,给大家分享出来共同学习.&quot;&gt;&lt;/a&gt;&amp;emsp;&amp;emsp;本来准备国庆写点东西的,但是几乎都是写写删删,憋了几天没写出个所以然来,后来索性就没写了.最近几天自己看视频算是提前研究完了SSH整合,而且也用整合后的框架模仿着写了2个案例,过程曲折,BUG满天飞.全是没遇到过的.有的BUG我甚至花了一上午加中午休息的时间查询各种资料才解决掉,而且都是细节配置问题….但是自己解决了BUG之后的那种喜悦感,也还是蛮开心的,哈哈!所以这篇主要就是记录,我整合SSH的时候出现的各种大小BUG,给大家分享出来共同学习.&lt;/h5&gt;&lt;hr&gt;
    
    </summary>
    
      <category term="学习笔记" scheme="http://yoursite.com/categories/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/"/>
    
    
      <category term="bug集" scheme="http://yoursite.com/tags/bug%E9%9B%86/"/>
    
      <category term="ssh框架整合" scheme="http://yoursite.com/tags/ssh%E6%A1%86%E6%9E%B6%E6%95%B4%E5%90%88/"/>
    
  </entry>
  
  <entry>
    <title>别让你的好奇心下线</title>
    <link href="http://yoursite.com/%E5%A5%BD%E5%A5%87%E5%BF%83/"/>
    <id>http://yoursite.com/好奇心/</id>
    <published>2017-09-27T12:25:33.000Z</published>
    <updated>2017-10-11T14:20:08.488Z</updated>
    
    <content type="html"><![CDATA[<h2 id=""><a href="#" class="headerlink" title=""></a><center><embed src="//music.163.com/style/swf/widget.swf?sid=28773822&type=2&auto=0&width=320&height=66" width="340" height="86" allownetworking="all"></center></h2><h5 id="emsp-emsp-emsp-第一篇博客-想了很久不知道该写些什么-鼓捣了2天终于把软件都弄好了-过程曲折-说多了都是泪-最后想来还是聊一聊最近学习的状态吧"><a href="#emsp-emsp-emsp-第一篇博客-想了很久不知道该写些什么-鼓捣了2天终于把软件都弄好了-过程曲折-说多了都是泪-最后想来还是聊一聊最近学习的状态吧" class="headerlink" title="&emsp;&emsp;&emsp;第一篇博客,想了很久不知道该写些什么.鼓捣了2天终于把软件都弄好了.过程曲折,说多了都是泪.最后想来还是聊一聊最近学习的状态吧."></a>&emsp;&emsp;&emsp;第一篇博客,想了很久不知道该写些什么.鼓捣了2天终于把软件都弄好了.过程曲折,说多了都是泪.最后想来还是聊一聊最近学习的状态吧.</h5><hr><a id="more"></a><p><strong>以下来自百度百科:</strong><br>好奇心是动物处于对某事物全部或部分属性空白时，本能的想添加此事物的属性的内在心理。表现为：</p><ol><li>对一些事物表示特别注意的情绪。</li><li>喜欢探究不了解事物的心理状态。</li><li>对于怪诞的嗜好或热情。</li></ol><p>心理学认为：好奇心是个体遇到新奇事物或处在新的外界条件下所产生的注意、操作、提问的心理倾向。好奇心是个体学习的内在动机之一、个体寻求知识的动力，是创造性人才的重要特征。</p><p>这个解释我个人还挺能接受的,特别是作为程序员.我觉得一个程序员的必备技能就是无时无刻不下线的好奇心.之前<strong>谈斌</strong>老师说我们不是技术工种,是熟练工种.我觉得挺有道理,一个好的程序员并不仅仅在于你功能实现的多么完美,代码完成的多么巧妙,更多的是一颗随时在线的好奇心.<strong>阳哥</strong>之前上课也无时无刻没有提及个人学习的重要性.师傅领进门,修为靠个人.我现在可能就是这种心境.哈哈,接下来几个月给自己加油!<br> </p><p align="right">2017-09-27 20:31:41 星期三</p><br><img src="/好奇心/044.jpg" alt=""><p></p>]]></content>
    
    <summary type="html">
    
      &lt;h2 id=&quot;&quot;&gt;&lt;a href=&quot;#&quot; class=&quot;headerlink&quot; title=&quot;&quot;&gt;&lt;/a&gt;&lt;center&gt;&lt;embed src=&quot;//music.163.com/style/swf/widget.swf?sid=28773822&amp;type=2&amp;auto=0&amp;width=320&amp;height=66&quot; width=&quot;340&quot; height=&quot;86&quot; allownetworking=&quot;all&quot;&gt;&lt;/center&gt;&lt;/h2&gt;&lt;h5 id=&quot;emsp-emsp-emsp-第一篇博客-想了很久不知道该写些什么-鼓捣了2天终于把软件都弄好了-过程曲折-说多了都是泪-最后想来还是聊一聊最近学习的状态吧&quot;&gt;&lt;a href=&quot;#emsp-emsp-emsp-第一篇博客-想了很久不知道该写些什么-鼓捣了2天终于把软件都弄好了-过程曲折-说多了都是泪-最后想来还是聊一聊最近学习的状态吧&quot; class=&quot;headerlink&quot; title=&quot;&amp;emsp;&amp;emsp;&amp;emsp;第一篇博客,想了很久不知道该写些什么.鼓捣了2天终于把软件都弄好了.过程曲折,说多了都是泪.最后想来还是聊一聊最近学习的状态吧.&quot;&gt;&lt;/a&gt;&amp;emsp;&amp;emsp;&amp;emsp;第一篇博客,想了很久不知道该写些什么.鼓捣了2天终于把软件都弄好了.过程曲折,说多了都是泪.最后想来还是聊一聊最近学习的状态吧.&lt;/h5&gt;&lt;hr&gt;
    
    </summary>
    
      <category term="心情日志" scheme="http://yoursite.com/categories/%E5%BF%83%E6%83%85%E6%97%A5%E5%BF%97/"/>
    
    
      <category term="心情随笔" scheme="http://yoursite.com/tags/%E5%BF%83%E6%83%85%E9%9A%8F%E7%AC%94/"/>
    
      <category term="生活日志" scheme="http://yoursite.com/tags/%E7%94%9F%E6%B4%BB%E6%97%A5%E5%BF%97/"/>
    
  </entry>
  
</feed>
